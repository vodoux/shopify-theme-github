{% comment %}
  ASCII Logo Section with Hover Glitch Effect

  INSTALLATION:
  1. Admin Shopify → Boutique en ligne → Thèmes → Modifier le code
  2. Dossier "Sections" → Ajouter une nouvelle section
  3. Nommez-la "ascii-logo" et collez tout ce code
  4. Sauvegardez
  5. Personnaliser le thème → Ajouter une section → "ASCII Logo"

  POUR CHANGER LE LOGO:
  Modifiez le contenu entre les balises <pre id="ascii-raw-..."> ci-dessous.
  Chaque espace compte — ne reformatez pas le contenu.
{% endcomment %}

<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');

  .ascii-logo-section-{{ section.id }} {
    background: {{ section.settings.bg_color }};
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
  }

  .ascii-logo-container-{{ section.id }} {
    position: relative;
    cursor: crosshair;
  }

  .ascii-logo-container-{{ section.id }} .ascii-line {
    white-space: pre;
    font-size: {{ section.settings.font_size }}px;
    line-height: 1.15;
    letter-spacing: 0.02em;
    font-family: 'JetBrains Mono', monospace;
    color: {{ section.settings.text_color }};
    display: block;
    margin: 0;
    padding: 0;
  }

  .ascii-logo-container-{{ section.id }} .ascii-line .char {
    display: inline;
    cursor: crosshair;
  }

  #ascii-raw-{{ section.id }} {
    display: none;
  }

  @media screen and (max-width: 768px) {
    .ascii-logo-container-{{ section.id }} {
      transform: scale({{ section.settings.mobile_scale }});
      transform-origin: center center;
    }
  }
</style>

<div class="ascii-logo-section-{{ section.id }}">
  <div class="ascii-logo-container-{{ section.id }}" id="ascii-logo-{{ section.id }}"></div>
</div>

{% comment %} ═══════════════════════════════════════════════════════════
  VOTRE ASCII ART CI-DESSOUS — Ne modifiez pas l'indentation!
  Pour changer le logo, remplacez le contenu entre <pre> et </pre>
═══════════════════════════════════════════════════════════ {% endcomment %}

<pre id="ascii-raw-{{ section.id }}">
                                                        ..-==++**##%%%%%%%%%%%%%%%%%%%%##***+==-:.                                                        
                                                  :=*#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#*=:                                                  
                                             .-*%%%%%%%%%%%%%%%%%+==%=:-%%+::*%%---==*%%%%%%%#%%%%%%%%%%%%*-.                                             
                                          .+%%%%%%%%%%%%%-.  .#%%.  :- :%%+  *%#  .::+%%%%%%+  .=%%%%%%%%%%%%%+:                                          
                                       .=%%%%%%%*-.:%%%%+ .##%%%%: ..  .%%+  #%#  .:%%%%%%%%- .: -%%%: .=#%%%%%%%+.                                       
                                     :#%%%%%%%%%-   .#%%- -%.  +%: .*. .%%+  #%*  =+%%%%%%%%: += .%%- .-. +%%%%%%%%%-                                     
                                  .-%%%%%%+--*%%#..+ .#%*. -=  *%: .%+. *%+  *%+     #%%%%%#..-..*%*.  :%%%%%%%%%%%%%%=.                                  
                                .:#%%%%#:..:. .%#.     +%*:  .*%%*-=%%++#%#**%%%##***%%%%%%=..:-%%*  -##%%%%%%%%%%%%%%%%-.                                
                               .#%%%%%%%#. :- .%%: .%=:+%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*-.  :%%%%%%%*-..:*%%%%#:.                              
                             .-%%%%#*%%%%%:  .#%%+-*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%##%%%%%#. .--. =%%%%%+.                             
                            .*%%%%+  .-%%%%-..+%%%%%%%%%%%%#*=-:..                      ..:-=+#%%%%%%%%%%%%%#. -%%%%*#%%%%%%#.                            
                           .#%%%%%%.    .*%%=-%%%%%%%%*=.                                         :*%%%%%%%%#. :+%%%%%%%%%%%%%:                           
                          :%%%%+     .%-. .#%%%%%%%+.                                                .=%%%%%%%-..=%%%%%#+:*%%%%-                          
                         .%%%%%+.. .***%%+#%%%%%*.                                                      .*%%%%%%%#+-.     .#%%%%:                         
                        .%%%%%%%%%-. .+%%%%%%%*...                                                        .#%%%%%+... -. .*%%%%%%:                        
                       .*%%%%#**#%%%+..*%%%%%=.+#.                                                          -%%%%%%%-  .*%%%%%%%%%.                       
                       =%%%#.     .=%%%%%%%%=            ..:=*%%%%#+:.              .=#%%%%*-..              -%%%%%%..#%%%%%%#%%%%*.                      
                      .%%%%= .#%%+. -%%%%%%%.=-       .=%%%%%%%%%%%%%%:           .%%%%%%%%%%%%+.            .%%%%%%%%%#*:.   =%%%%.                      
                      +%%%%%:.     .=%%%%%%=.%.     .+%%%%%%%%%%%%%%%%#           *%%%%%%%%%%%%%#.            *#*%%%%*.... .=  #%%%#.                     
                     .%%%%%%%%#-..-#%%%%%*%.-#.   .-%%%%%%%%%%%%%%%%%%.          :%%%%%%%%%%%%%%%:            +%.#%%%%%%%%:+%-.=%%%%:                     
                     -%%%%%#%%%%%%%%%%%%=+% =*.   +%%%%%%%%%#%%%%%%%#.           =%%%%%%=..#%%%%%%+..         +%:+%%%%%%%%%%%%%%%%%%=                     
                     +%%%* .+%%%. +%%%%%+=%..*. .=%%%%%%%%-:%%%%%%#:#%%*.        +%%%%%#..-%%%%%%%%%%%:.     .#%%.#%%%%-        #%%%*                     
                     *%%%+ .*%%%- :%%%%+.#%.    .#%%%%%%*.#%%%%%#-%%%%%%*.       =%%%%%%%%%%%%%%%%%%%%%+     .%%=#=%%%%= .+..*. +::%#                     
                     #%%%%*       *%%%%=-*%-    .#%%%%%.*%%%%%%:#%%%%%%%+        :%%%%%%%%%%.   .#%%%%%%.    :%%+ -%%%%+ .%%%%: -%%%%                     
                     %%%%%%%%%%%%%%%%%%-  %+      -+- =%%%%%%==%%%%%%%%#   ..:.   *%%%%%%%%+    =%%%%%%%:    :%%%--%%%%%%%%%%%%%%%%%%                     
                     %%%%%%%%%%%%%%%%%%#+ %*        .#%%%%%%%%%%%%%%%%#.  +%%%%+  :%%%%%%%%%%%%%%%%%%%%%.    .%%:.-%%%%%%%%%%%%%%%%%%                     
                     %%%%%%%%%%%%%%%%%%= .%-       .#%%%%%%%%%%%%%%%%-.  =%%%%%%=  :%%%%%%%%%%%%%%%%%%%-      -%#.*%%%%%%%%%%%%%%%%%%                     
                     #%%%%%%%%%%%%%%%%%+ =#.       .%%%%%%%%%%%%%%%-.   :%%%%%%%%.  .#%%%%%%%%%%%%%%%#.     -*.=%==%%%%%%%%%%%%%%%%%#                     
                     +%%%%%%%%%%%%%%%%%%+%+  .-    .#%%%%%%%%%%%*..    .%%%*.=%%%=   ..+%%%%%%%%%%%=.        ..:%%%%%%%%%%%%%%%%%%%%*                     
                     =%%%%%%%%%%%%%%%%%%%%=.-:%:    .-%%%%%%*:..      .%%%%*.=%%%%-      .........           ::.%%%%%%%.*%%%%%%%%%%%=                     
                     :%%%%%%#:.. ..+%%%%%%+.* :%=.                   :%%%%%%%%%%%%%-                      =: #=:%%%%%%= ..#%%%%%%%%%:                     
                     .#%%%%-..-##*..+%%%%%%:    ..  ...             -%%%%%%%%%%%%%%%+                  -*=. *#.*%%%%%%*+  ..-*%%%%%#.                     
                      .%%%%. :%%%%-.#%%%%%%%= .+%%*-...=**+-.      .#%%%%%%%%%%%%%%%%.       :#%%%%#*-.  .#*::%%%%%%#.        :%%%%.                      
                       +%%%%: -%%%%%%%%%%%%%%%#+++*#%%%%*.         .+%%%%%-...+%%%%%*           .#%%%%%%*==*%%%%%%%%%%%%%%%%%#%%%%*.                      
                       .#%%%%%%%%+:.  .*%%%%%%%%%%%%%%%%- =.:.       .::.      .:==:.        .#:.#%%%%%%%%%%%%%%%%#..+%%%%%%%%%%%#.                       
                        :%%%%%%*. .=#= .%%%%%%%%+*%%%:.*#...                                 :*.=%- :%%%%%%%%%%%%%%=. .-%%%%%%%%%:                        
                         :%%%%%: .%%=. :%%%%%%%%#..*=  -%:                                      *%  -%-..#%%%%%%:.      ..=%%%%%:                         
                          -%%%%+     :*%%=.+%%%%%%#=.  -%:                                      +%.  .=%%%%%%%%%#:  .=##=.=%%%%-                          
                           :%%%%%#*#%%%*.   .+%%%%%%%#+*%:                                      :%=+%%%%%%%%=..=%%%+.  :*%%%%%:                           
                            .#%%%%%%%#.   +#:-%%%%%%%%%%%%#*+-:.                         ..:-**#%%%%%%%%%%%%.   .-%%%#--%%%%#.                            
                             .=%%%%%=  =#=#%%%%- .-#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+:.:+%#. -  .:#%%%%%%+.                             
                               :#%%%%#%%%%%%%%: .-. -%%*%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%#. .-. :%*. .+:.*%%%%#:                               
                                .-%%%%%%%%%%%-  ..%%%%=    .#%--==+#%%%%%%%%%*#%%%%%+=+%%%*-:=%#  .%%#. -. :%%+..+%%%%%%-.                                
                                  .=%%%%%%%%: .#%%%%%%. :#*+%#. ...=%%%%%%*.   .#%+    .=%#   .:   =%%#.  =%%%%*#%%%%%=.                                  
                                     -#%%%%%#=%%%%%%%+....%%%#. .=%%%%%%%%..+%#%%%. -%- .#%. .: :: .%%%+  =%%%%%%%%%-                                     
                                       .+%%%%%%%%%%%%. .=+%%%*..++%%%%%%%* .#%%%%%: -%= .#%+ .%*%+  *%%%+=%%%%%%%+.                                       
                                          :+%%%%%%%%%+-:. *%%=    :%%%%%%%. :=.:#%*  .. :%%%. =%%%.:+%%%%%%%%%+:                                          
                                             .-*%%%%%%%%%%%%%%#*++*%%%%%%%%=..:*%%%%=:-*%%%%**%%%%%%%%%%%%*-.                                             
                                                  :=*#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#*=:                                                  
                                                        ..-=++**###%%%%%%%%%%%%%%%%%%%%###**++=-..                                                        </pre>

<script>
(function() {
  var rawEl = document.getElementById('ascii-raw-{{ section.id }}');
  var container = document.getElementById('ascii-logo-{{ section.id }}');
  if (!rawEl || !container) return;

  var ASCII_ART = rawEl.textContent;
  if (ASCII_ART.charAt(0) === '\n') ASCII_ART = ASCII_ART.substring(1);
  if (ASCII_ART.charAt(ASCII_ART.length - 1) === '\n') ASCII_ART = ASCII_ART.substring(0, ASCII_ART.length - 1);

  var GLITCH_CHARS = '\u2591\u2592\u2593\u2588\u2584\u2580\u25A0\u25A1\u25AA\u25AB\u25AC\u25B2\u25BA\u25BC\u25C4\u25CA\u25CB\u25CF\u25D8\u25D9\u263A\u263B\u2660\u2663\u2665\u2666';
  var HOVER_RADIUS = {{ section.settings.hover_radius }};
  var FONT_SIZE = {{ section.settings.font_size }};
  var CHAR_W = FONT_SIZE * 0.664;
  var CHAR_H = FONT_SIZE * 1.15;

  var lines = ASCII_ART.split('\n');
  var charGrid = [];
  var contentChars = [];

  lines.forEach(function(line, row) {
    var lineEl = document.createElement('div');
    lineEl.className = 'ascii-line';
    var rowChars = [];

    for (var i = 0; i < line.length; i++) {
      var span = document.createElement('span');
      span.textContent = line[i];
      span.className = 'char';
      lineEl.appendChild(span);

      var entry = { el: span, row: row, col: i, original: line[i], isContent: line[i].trim() !== '' };
      rowChars.push(entry);
      if (entry.isContent) contentChars.push(entry);
    }

    container.appendChild(lineEl);
    charGrid.push(rowChars);
  });

  var isHovering = false;

  container.addEventListener('mousemove', function(e) {
    isHovering = true;

    var rect = container.getBoundingClientRect();
    var col = (e.clientX - rect.left) / CHAR_W;
    var row = (e.clientY - rect.top) / CHAR_H;

    var rowStart = Math.max(0, Math.floor(row) - HOVER_RADIUS);
    var rowEnd = Math.min(charGrid.length - 1, Math.floor(row) + HOVER_RADIUS);

    for (var r = rowStart; r <= rowEnd; r++) {
      var rChars = charGrid[r];
      var colStart = Math.max(0, Math.floor(col) - HOVER_RADIUS);
      var colEnd = Math.min(rChars.length - 1, Math.floor(col) + HOVER_RADIUS);

      for (var ci = colStart; ci <= colEnd; ci++) {
        var c = rChars[ci];
        if (!c.isContent) continue;

        var dx = ci - col;
        var dy = r - row;
        var dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < HOVER_RADIUS) {
          var intensity = 1 - (dist / HOVER_RADIUS);

          if (Math.random() < intensity * 0.6) {
            c.el.textContent = GLITCH_CHARS[Math.floor(Math.random() * GLITCH_CHARS.length)];
            var brightness = Math.floor(150 + intensity * 105);
            c.el.style.color = 'rgb(' + brightness + ',' + brightness + ',' + brightness + ')';
          }

          clearTimeout(c.el._rt);
          c.el._rt = setTimeout((function(ch) {
            return function() {
              ch.el.textContent = ch.original;
              ch.el.style.color = '';
            };
          })(c), 80 + Math.random() * 200);
        }
      }
    }
  });

  container.addEventListener('mouseleave', function() {
    isHovering = false;
    setTimeout(function() {
      if (!isHovering) {
        contentChars.forEach(function(c) {
          c.el.textContent = c.original;
          c.el.style.color = '';
        });
      }
    }, 300);
  });
})();
</script>

{% schema %}
{
  "name": "ASCII Logo",
  "tag": "section",
  "class": "ascii-logo-wrapper",
  "settings": [
    {
      "type": "range",
      "id": "font_size",
      "label": "Taille des caractères",
      "min": 3,
      "max": 12,
      "step": 0.5,
      "default": 6,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "hover_radius",
      "label": "Rayon de l'effet hover",
      "min": 3,
      "max": 20,
      "step": 1,
      "default": 8
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Couleur de fond",
      "default": "#0a0a0a"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Couleur du texte",
      "default": "#e8e8e8"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Espacement haut",
      "min": 0,
      "max": 200,
      "step": 10,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Espacement bas",
      "min": 0,
      "max": 200,
      "step": 10,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "mobile_scale",
      "label": "Échelle mobile",
      "min": 0.2,
      "max": 1,
      "step": 0.1,
      "default": 0.5
    }
  ],
  "presets": [
    {
      "name": "ASCII Logo"
    }
  ]
}
{% endschema %}
